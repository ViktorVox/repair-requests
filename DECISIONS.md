# Архитектурные решения (ADR)

Здесь зафиксированы ключевые технические и архитектурные решения, принятые при реализации прототипа "РемонтСервис".

### 1. Использование Laravel Sail
**Решение:** Вся инфраструктура развернута через стандартный пакет Laravel Sail.
**Обоснование:** Обеспечивает максимальную скорость старта (Zero-config) и консистентность окружения (PHP, PostgreSQL, Redis) у всех разработчиков в команде. Идеально подходит для парадигмы "быстрого прототипирования" без траты времени на настройку локальных серверов.

### 2. Laravel Breeze + Vue (Inertia.js)
**Решение:** Выбор Inertia.js вместо классического разделения на REST API + отдельный SPA frontend.
**Обоснование:** Позволяет использовать всю мощь реактивного Vue 3 и Tailwind CSS, оставаясь в монолитной архитектуре Laravel. Мы избежали необходимости писать ресурсы (API Resources), настраивать JWT/Sanctum токены вручную и дублировать роутинг на клиенте и сервере, что кардинально ускорило доставку результата.

### 3. Пессимистичная блокировка (Pessimistic Locking)
**Решение:** Использование `DB::transaction()` в связке с `lockForUpdate()` в методе взятия заявки мастером.
**Обоснование:** Классическая проблема конкурентного доступа (Race Condition). Если два мастера одновременно нажмут "Взять в работу", стандартная проверка `if ($request->status === 'new')` пропустит обоих. `lockForUpdate` блокирует строку на уровне PostgreSQL (SELECT ... FOR UPDATE) до конца транзакции, гарантируя абсолютную надежность бизнес-логики.

### 4. Типизация статусов через ENUM в БД
**Решение:** Статусы заявок (`new`, `assigned`, `in_progress`, `done`, `canceled`) зафиксированы жестко на уровне миграции через `$table->enum()`.
**Обоснование:** Строгая типизация на уровне базы данных защищает от записи некорректных состояний (Data Integrity). Это снимает часть нагрузки с валидаторов приложения и делает схему БД самодокументируемой.

### 5. Гибридный формат коммитов (Conventional Commits + RU)
**Решение:** Использование тегов на английском (`feat:`, `fix:`, `docs:`) и детального описания на русском языке.
**Обоснование:** Английские теги позволяют использовать автоматизированные инструменты парсинга changelog-ов и соблюдать общепринятые мировые стандарты, а русское описание делает историю коммитов кристально понятной для русскоязычной команды, снижая когнитивную нагрузку при код-ревью.